{
  "version": 3,
  "sources": ["../../@vanillaspa/web-components/index.js"],
  "sourcesContent": ["const htmlFiles = import.meta.glob('/src/components/**/*.html', { query: '?raw', import: 'default', eager: true });\r\n\r\nwindow.getShadowDocument = function magic(hostDataIDs) {\r\n    if (typeof hostDataIDs === 'string') { hostDataIDs = hostDataIDs.split(','); }\r\n    else if (Array.isArray(hostDataIDs)) { hostDataIDs = hostDataIDs.toReversed(); }\r\n    else return undefined;\r\n    if (hostDataIDs) {\r\n        let shadowDOM = document;\r\n        for (let hostDataID of hostDataIDs) {\r\n            let found = shadowDOM.querySelector('[data-id=\"' + hostDataID + '\"]');\r\n            if (found) { shadowDOM = found.shadowRoot; } else {\r\n                console.error({ hostDataID });\r\n                return null;\r\n            }\r\n        }\r\n        return shadowDOM;\r\n    }\r\n    return null;\r\n}\r\n\r\nfunction getComponentName(filePath) {\r\n    const fileName = filePath.split(\"/\").pop();\r\n    const dashSplit = fileName.split('-');\r\n    const prefix = dashSplit[0];\r\n    const dotSplit = dashSplit[1].split('.'); // TODO accept three-fold-components\r\n    const suffix = dotSplit[0];\r\n    return `${prefix}-${suffix}`;\r\n}\r\n\r\nfor (let filePath of Object.keys(htmlFiles)) {\r\n    let componentName = getComponentName(filePath);\r\n    console.debug(`defining ${componentName}...`);\r\n    let html = htmlFiles[filePath];\r\n    const fragment = document.createRange().createContextualFragment(html);\r\n    const scriptFragment = fragment.querySelector(\"script\");\r\n    const styleFragment = fragment.querySelector(\"style\");\r\n    const templateFragment = fragment.querySelector(\"template\");\r\n    customElements.define(componentName, class extends HTMLElement {\r\n        constructor() {\r\n            super();\r\n            const shadowRoot = this.attachShadow({ mode: \"open\" });\r\n        }\r\n        connectedCallback() {\r\n            this.hostDataIDs = []; // used to find the nested shadowDocument\r\n            this.dataset.id = Math.random().toString(16).substring(2, 8); // should suffice\r\n            let hostElement = this;\r\n            while (hostElement && hostElement.dataset.id) { // +3 get parent.host data-id 's\r\n                this.hostDataIDs.push(hostElement.dataset.id);\r\n                hostElement = hostElement.getRootNode().host;\r\n            }\r\n            this.#render();\r\n        }\r\n        #render() {\r\n            this.shadowRoot.replaceChildren();\r\n            this.#appendTemplate();\r\n            this.#appendStyle();\r\n            this.#appendScript();\r\n        }\r\n        #appendScript() {\r\n            if (scriptFragment) {\r\n                const scriptElement = document.createElement(\"script\");\r\n                scriptElement.setAttribute(\"type\", \"module\");\r\n                scriptElement.textContent = `\r\nconst shadowDocument = getShadowDocument('${this.hostDataIDs.toReversed().toString()}');\r\n${scriptFragment ? scriptFragment.textContent : ''}\r\n`;\r\n                this.shadowRoot.appendChild(scriptElement);\r\n            }\r\n        }\r\n        #appendStyle() {\r\n            if (styleFragment) {\r\n                let clonedStyle = styleFragment.cloneNode(true);\r\n                this.shadowRoot.appendChild(clonedStyle);\r\n            }\r\n        }\r\n        #appendTemplate() {\r\n            if (templateFragment) {\r\n                const clonedFragment = templateFragment.content.cloneNode(true);\r\n                this.shadowRoot.appendChild(clonedFragment);\r\n            }\r\n        }\r\n    });\r\n}\r\n"],
  "mappings": ";AAAA,IAAM,YAAY,YAAY,KAAK,6BAA6B,EAAE,OAAO,QAAQ,QAAQ,WAAW,OAAO,KAAK,CAAC;AAEjH,OAAO,oBAAoB,SAAS,MAAM,aAAa;AACnD,MAAI,OAAO,gBAAgB,UAAU;AAAE,kBAAc,YAAY,MAAM,GAAG;AAAA,EAAG,WACpE,MAAM,QAAQ,WAAW,GAAG;AAAE,kBAAc,YAAY,WAAW;AAAA,EAAG,MAC1E,QAAO;AACZ,MAAI,aAAa;AACb,QAAI,YAAY;AAChB,aAAS,cAAc,aAAa;AAChC,UAAI,QAAQ,UAAU,cAAc,eAAe,aAAa,IAAI;AACpE,UAAI,OAAO;AAAE,oBAAY,MAAM;AAAA,MAAY,OAAO;AAC9C,gBAAQ,MAAM,EAAE,WAAW,CAAC;AAC5B,eAAO;AAAA,MACX;AAAA,IACJ;AACA,WAAO;AAAA,EACX;AACA,SAAO;AACX;AAEA,SAAS,iBAAiB,UAAU;AAChC,QAAM,WAAW,SAAS,MAAM,GAAG,EAAE,IAAI;AACzC,QAAM,YAAY,SAAS,MAAM,GAAG;AACpC,QAAM,SAAS,UAAU,CAAC;AAC1B,QAAM,WAAW,UAAU,CAAC,EAAE,MAAM,GAAG;AACvC,QAAM,SAAS,SAAS,CAAC;AACzB,SAAO,GAAG,MAAM,IAAI,MAAM;AAC9B;AAEA,SAAS,YAAY,OAAO,KAAK,SAAS,GAAG;AACzC,MAAI,gBAAgB,iBAAiB,QAAQ;AAC7C,UAAQ,MAAM,YAAY,aAAa,KAAK;AAC5C,MAAI,OAAO,UAAU,QAAQ;AAC7B,QAAM,WAAW,SAAS,YAAY,EAAE,yBAAyB,IAAI;AACrE,QAAM,iBAAiB,SAAS,cAAc,QAAQ;AACtD,QAAM,gBAAgB,SAAS,cAAc,OAAO;AACpD,QAAM,mBAAmB,SAAS,cAAc,UAAU;AAC1D,iBAAe,OAAO,eAAe,cAAc,YAAY;AAAA,IAC3D,cAAc;AACV,YAAM;AACN,YAAM,aAAa,KAAK,aAAa,EAAE,MAAM,OAAO,CAAC;AAAA,IACzD;AAAA,IACA,oBAAoB;AAChB,WAAK,cAAc,CAAC;AACpB,WAAK,QAAQ,KAAK,KAAK,OAAO,EAAE,SAAS,EAAE,EAAE,UAAU,GAAG,CAAC;AAC3D,UAAI,cAAc;AAClB,aAAO,eAAe,YAAY,QAAQ,IAAI;AAC1C,aAAK,YAAY,KAAK,YAAY,QAAQ,EAAE;AAC5C,sBAAc,YAAY,YAAY,EAAE;AAAA,MAC5C;AACA,WAAK,QAAQ;AAAA,IACjB;AAAA,IACA,UAAU;AACN,WAAK,WAAW,gBAAgB;AAChC,WAAK,gBAAgB;AACrB,WAAK,aAAa;AAClB,WAAK,cAAc;AAAA,IACvB;AAAA,IACA,gBAAgB;AACZ,UAAI,gBAAgB;AAChB,cAAM,gBAAgB,SAAS,cAAc,QAAQ;AACrD,sBAAc,aAAa,QAAQ,QAAQ;AAC3C,sBAAc,cAAc;AAAA,4CACA,KAAK,YAAY,WAAW,EAAE,SAAS,CAAC;AAAA,EAClF,iBAAiB,eAAe,cAAc,EAAE;AAAA;AAElC,aAAK,WAAW,YAAY,aAAa;AAAA,MAC7C;AAAA,IACJ;AAAA,IACA,eAAe;AACX,UAAI,eAAe;AACf,YAAI,cAAc,cAAc,UAAU,IAAI;AAC9C,aAAK,WAAW,YAAY,WAAW;AAAA,MAC3C;AAAA,IACJ;AAAA,IACA,kBAAkB;AACd,UAAI,kBAAkB;AAClB,cAAM,iBAAiB,iBAAiB,QAAQ,UAAU,IAAI;AAC9D,aAAK,WAAW,YAAY,cAAc;AAAA,MAC9C;AAAA,IACJ;AAAA,EACJ,CAAC;AACL;",
  "names": []
}
