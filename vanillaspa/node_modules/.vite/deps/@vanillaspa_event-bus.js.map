{
  "version": 3,
  "sources": ["../../@vanillaspa/event-bus/index.js"],
  "sourcesContent": ["export const name = \"eventbus\"; // The module name, can be made globally available via the window object, which should be on top.\r\nconst listeners = new WeakMap(); // WeakMap to store listeners per object. Keep it private unless you know what you do.\r\n// Should auto-cleanup listeners when object is GC'd\r\n// This module implements EventTarget.\r\nexport function addEventListener(type, listener, context = undefined) { // (TODO check integration into options)\r\n    if (context && typeof context === 'object') { // context is well defined, should be a WebComponent\r\n        if (!listeners.has(context)) { // context is yet unknown to the listeners\r\n            listeners.set(context, new Map()); // will be stored here\r\n        }\r\n        const contextListeners = listeners.get(context);\r\n        if (!contextListeners.has(type)) { // type is not yet registered\r\n            contextListeners.set(type, []);\r\n        } // next push the handler to the WeakMap for the given context\r\n        contextListeners.get(type).push(listener);\r\n    } else { // default\r\n        if (context) { // illegal context\r\n            throw new Error(\"Syntax error.\");\r\n        }\r\n        window.addEventListener(type, listener);\r\n    }\r\n}\r\n\r\nexport function removeEventListener(type, listener, context = undefined) {\r\n    if (context && typeof context === 'object') {\r\n        const contextListeners = listeners.get(context);\r\n        if (contextListeners && contextListeners.has(type)) {\r\n            const handlers = contextListeners.get(type);\r\n            const index = handlers.indexOf(listener);\r\n            if (index > -1) {\r\n                handlers.splice(index, 1);\r\n            }\r\n        }\r\n    } else { // default\r\n        window.removeEventListener(type);\r\n    }\r\n}\r\n\r\nexport function dispatchEvent(event, context = undefined) {\r\n    if (!context) {\r\n        if (event instanceof CustomEvent) {\r\n            context = event.detail.target;\r\n        } else {\r\n            context = event.target;\r\n        }\r\n    }\r\n    if (context && listeners.has(context)) {\r\n        const contextListeners = listeners.get(context);\r\n        if (contextListeners.has(event.type)) { // Call context-specific listeners\r\n            contextListeners.get(event.type).forEach(handler => handler(event));\r\n        }\r\n    } else { // default\r\n        window.dispatchEvent(event);\r\n    }\r\n}\r\n"],
  "mappings": ";AAAO,IAAM,OAAO;AACpB,IAAM,YAAY,oBAAI,QAAQ;AAGvB,SAAS,iBAAiB,MAAM,UAAU,UAAU,QAAW;AAClE,MAAI,WAAW,OAAO,YAAY,UAAU;AACxC,QAAI,CAAC,UAAU,IAAI,OAAO,GAAG;AACzB,gBAAU,IAAI,SAAS,oBAAI,IAAI,CAAC;AAAA,IACpC;AACA,UAAM,mBAAmB,UAAU,IAAI,OAAO;AAC9C,QAAI,CAAC,iBAAiB,IAAI,IAAI,GAAG;AAC7B,uBAAiB,IAAI,MAAM,CAAC,CAAC;AAAA,IACjC;AACA,qBAAiB,IAAI,IAAI,EAAE,KAAK,QAAQ;AAAA,EAC5C,OAAO;AACH,QAAI,SAAS;AACT,YAAM,IAAI,MAAM,eAAe;AAAA,IACnC;AACA,WAAO,iBAAiB,MAAM,QAAQ;AAAA,EAC1C;AACJ;AAEO,SAAS,oBAAoB,MAAM,UAAU,UAAU,QAAW;AACrE,MAAI,WAAW,OAAO,YAAY,UAAU;AACxC,UAAM,mBAAmB,UAAU,IAAI,OAAO;AAC9C,QAAI,oBAAoB,iBAAiB,IAAI,IAAI,GAAG;AAChD,YAAM,WAAW,iBAAiB,IAAI,IAAI;AAC1C,YAAM,QAAQ,SAAS,QAAQ,QAAQ;AACvC,UAAI,QAAQ,IAAI;AACZ,iBAAS,OAAO,OAAO,CAAC;AAAA,MAC5B;AAAA,IACJ;AAAA,EACJ,OAAO;AACH,WAAO,oBAAoB,IAAI;AAAA,EACnC;AACJ;AAEO,SAAS,cAAc,OAAO,UAAU,QAAW;AACtD,MAAI,CAAC,SAAS;AACV,QAAI,iBAAiB,aAAa;AAC9B,gBAAU,MAAM,OAAO;AAAA,IAC3B,OAAO;AACH,gBAAU,MAAM;AAAA,IACpB;AAAA,EACJ;AACA,MAAI,WAAW,UAAU,IAAI,OAAO,GAAG;AACnC,UAAM,mBAAmB,UAAU,IAAI,OAAO;AAC9C,QAAI,iBAAiB,IAAI,MAAM,IAAI,GAAG;AAClC,uBAAiB,IAAI,MAAM,IAAI,EAAE,QAAQ,aAAW,QAAQ,KAAK,CAAC;AAAA,IACtE;AAAA,EACJ,OAAO;AACH,WAAO,cAAc,KAAK;AAAA,EAC9B;AACJ;",
  "names": []
}
