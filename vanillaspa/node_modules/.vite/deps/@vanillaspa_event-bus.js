// node_modules/@vanillaspa/event-bus/index.js
var name = "eventbus";
var listeners = /* @__PURE__ */ new WeakMap();
function addEventListener(type, listener, context = void 0) {
  if (context && typeof context === "object") {
    if (!listeners.has(context)) {
      listeners.set(context, /* @__PURE__ */ new Map());
    }
    const contextListeners = listeners.get(context);
    if (!contextListeners.has(type)) {
      contextListeners.set(type, []);
    }
    contextListeners.get(type).push(listener);
  } else {
    if (context) {
      throw new Error("Syntax error.");
    }
    window.addEventListener(type, listener);
  }
}
function removeEventListener(type, listener, context = void 0) {
  if (context && typeof context === "object") {
    const contextListeners = listeners.get(context);
    if (contextListeners && contextListeners.has(type)) {
      const handlers = contextListeners.get(type);
      const index = handlers.indexOf(listener);
      if (index > -1) {
        handlers.splice(index, 1);
      }
    }
  } else {
    window.removeEventListener(type);
  }
}
function dispatchEvent(event, context = void 0) {
  if (!context) {
    if (event instanceof CustomEvent) {
      context = event.detail.target;
    } else {
      context = event.target;
    }
  }
  if (context && listeners.has(context)) {
    const contextListeners = listeners.get(context);
    if (contextListeners.has(event.type)) {
      contextListeners.get(event.type).forEach((handler) => handler(event));
    }
  } else {
    window.dispatchEvent(event);
  }
}
export {
  addEventListener,
  dispatchEvent,
  name,
  removeEventListener
};
//# sourceMappingURL=@vanillaspa_event-bus.js.map
